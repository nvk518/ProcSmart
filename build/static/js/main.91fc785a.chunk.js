(this["webpackJsonpreact-proctor"]=this["webpackJsonpreact-proctor"]||[]).push([[0],{100:function(e,t,a){e.exports={left:"Record_left__1ZiRp",right:"Record_right__K_lK5"}},148:function(e,t,a){e.exports=a(191)},153:function(e,t,a){},167:function(e,t){},168:function(e,t){},179:function(e,t){},188:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),l=a.n(o),c=(a(153),a(17)),s=a(16),i=a(27),d=a(26),m=a(129),u=a(30),h=a(38),b=a(99),p=a.n(b).a.initializeApp({apiKey:"AIzaSyDJQQacGtRfPTtiTrP36OSbU2oNWEe13zA",authDomain:"procsmart-2d2a8.firebaseapp.com",databaseURL:"https://procsmart-2d2a8.firebaseio.com",projectId:"procsmart-2d2a8",storageBucket:"procsmart-2d2a8.appspot.com",messagingSenderId:"449774486205",appId:"1:449774486205:web:efc57de71384bd2b5aedd4",measurementId:"G-1YYE34YL6G"}).firestore(),f=a(230),E=a(237),v=a(229),g=a(92),y=a.n(g),R=a(127),D=a.n(R),k=a(100),S=a.n(k),O=a(190),w=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).detectFromVideoFrame=function(t,a){t.detect(a).then((function(n){e.showDetections(n),requestAnimationFrame((function(){e.detectFromVideoFrame(t,a)}))}),(function(e){console.log("Couldn't start the webcam"),console.error(e)})).catch((function(e){return""}))},e.showDetections=function(t){var a=e.canvasRef.current.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height);var n="24px helvetica";a.font=n,a.textBaseline="top";var r,o,l,c,s,i,d=!1;if(t.forEach((function(t){if(e.state.recording)switch(t.class){case"bottle":o=!!e.state.bottle;break;case"book":l=!!e.state.book;break;case"remote":c=!!e.state.remote;break;case"laptop":s=!!e.state.laptop;break;case"keyboard":i=!!e.state.keyboard;break;case"person":d=!!e.state.person;break;case"cell phone":r=!!e.state.phone}var m=t.bbox[0],u=t.bbox[1],h=t.bbox[2],b=t.bbox[3];a.strokeStyle="#2fff00",a.lineWidth=1,a.strokeRect(m,u,h,b),a.fillStyle="#2fff00";var p=a.measureText(t.class).width,f=parseInt(n,10);a.fillRect(m,u,p+10,f+10),a.fillRect(m,u+b-f,p+15,f+10),a.fillStyle="#000000",a.fillText(t.class,m,u),a.fillText(t.score.toFixed(2),m,u+b-f)})),e.state.recording){var m=l?e.state.bookDetected+1:e.state.bookDetected,u=o?e.state.bottleDetected+1:e.state.bottleDetected,h=i?e.state.keyboardDetected+1:e.state.keyboardDetected,b=s?e.state.laptopDetected+1:e.state.laptopDetected,p=c?e.state.remoteDetected+1:e.state.remoteDetected,f=d?e.state.noPerson:e.state.noPerson+1,E=r?e.state.phoneDetected+1:e.state.phoneDetected;e.setState({bookDetected:m,bottleDetected:u,keyboardDetected:h,laptopDetected:b,remoteDetected:p,noPerson:f,phoneDetected:E})}},e.componentDidMount=function(){var t=Object(h.a)(e);if(navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia){var a=navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){var a=[],n=new MediaRecorder(e,{type:"audio/webm"});return n.addEventListener("dataavailable",(function(e){"undefined"!==typeof e.data&&0!==e.data.size&&a.push(e.data)})),n.addEventListener("stop",(function(){var e=new Blob(a,{type:"audio/webm"});t.renderRecording(e,t.listRef.current),a=[]})),t.recordRef.current.removeAttribute("hidden"),t.recordRef.current.addEventListener("click",(function(){"inactive"===n.state?(n.start(),t.setState({recording:!0}),t.recordRef.current.innerText="Stop"):(n.stop(),t.createJSON(),t.setState({recording:!1,bookDetected:0,bottleDetected:0,keyboardDetected:0,laptopDetected:0,remoteDetected:0,noPerson:0,phoneDetected:0}),t.recordRef.current.innerText="Record")})),window.stream=e,t.videoRef.current.srcObject=e,new Promise((function(e){t.videoRef.current.onloadedmetadata=function(){e()}}))}),(function(e){console.log("Couldn't start the webcam"),console.error(e)})),n=O.load();Promise.all([n,a]).then((function(t){e.setState({loadingMsg:"Model loaded."}),e.detectFromVideoFrame(t[0],e.videoRef.current)})).catch((function(e){console.error(e)}))}},e.createJSON=function(){var t={studentName:e.state.name,class:e.state.course+" - "+e.state.term+" "+e.state.year,sessionID:e.state.sessionID,noPerson:e.state.person?e.state.noPerson/12:"N/A",phoneDetected:e.state.phone?e.state.phoneDetected/12:"N/A",bookDetected:e.state.book?e.state.bookDetected/12:"N/A",bottleDetected:e.state.bottle?e.state.bottleDetected/12:"N/A",laptopDetected:e.state.laptop?e.state.laptopDetected/12:"N/A",remoteDetected:e.state.remote?e.state.remoteDetected/12:"N/A",keyboardDetected:e.state.keyboard?e.state.keyboardDetected/12:"N/A"},a=document.createElement("a");a.id="download",a.download="stack_"+Date.now()+".json",a.href=URL.createObjectURL(new Blob([JSON.stringify(t,null,2)])),a.click()},e.renderRecording=function(e,t){var a=URL.createObjectURL(e),n=new Date,r=document.createElement("a");r.id="download",r.download="recording_".concat(n.getFullYear(),"-").concat((n.getMonth()+1).toString().padStart(2,"0"),"-").concat(n.getDay().toString().padStart(2,"0"),"--").concat(n.getHours().toString().padStart(2,"0"),"-").concat(n.getMinutes().toString().padStart(2,"0"),"-").concat(n.getSeconds().toString().padStart(2,"0"),".webm"),r.href=a,r.click()},e.handleOnSubmit=function(t){t.preventDefault();var a=Object(h.a)(e);p.collection("users").where("sessionID","==",e.idRef.current.value).limit(1).get().then((function(e){e.forEach((function(e){a.setState({name:a.nameRef.current.value,id:a.idRef.current.value,course:e.data().course,term:e.data().term,year:e.data().year,book:e.data().book,bottle:e.data().book,phone:e.data().phone,person:e.data().person,remote:e.data().remote,laptop:e.data().laptop,keyboard:e.data().keyboard,recordButton:!1,formHidden:!0}),console.log(e.id," => ",e.data())}))})).catch((function(e){console.log("Error getting documents: ",e)}))},e.videoRef=Object(n.createRef)(),e.canvasRef=Object(n.createRef)(),e.recordRef=Object(n.createRef)(),e.listRef=Object(n.createRef)(),e.nameRef=Object(n.createRef)(),e.idRef=Object(n.createRef)(),e.styles={position:"fixed"},e.state={userCode:"",recording:!1,book:!1,bottle:!1,keyboard:!1,laptop:!1,remote:!1,person:!1,phone:!1,bookDetected:0,bottleDetected:0,keyboardDetected:0,laptopDetected:0,remoteDetected:0,noPerson:0,phoneDetected:0,loadingMsg:"Model is loading, please wait.",recordButton:!0,sessionID:"",name:"",formHidden:!1},e.detectFromVideoFrame=e.detectFromVideoFrame.bind(Object(h.a)(e)),e.showDetections=e.showDetections.bind(Object(h.a)(e)),e.componentDidMount=e.componentDidMount.bind(Object(h.a)(e)),e.renderRecording=e.renderRecording.bind(Object(h.a)(e)),e.handleOnSubmit=e.handleOnSubmit.bind(Object(h.a)(e)),e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:S.a.left},r.a.createElement("h1",null,"Record"),r.a.createElement("h4",null,this.state.loadingMsg),r.a.createElement("h2",null,"Name: ",this.state.name),r.a.createElement("h2",null,"Session ID: ",this.state.id),r.a.createElement("h2",null,"Course: ",this.state.course," ",this.state.term," ",this.state.year),r.a.createElement("br",null),r.a.createElement("form",{hidden:this.state.formHidden,noValidate:!0,autoComplete:"off",onSubmit:this.handleOnSubmit},r.a.createElement("div",null,r.a.createElement(E.a,{required:!0,inputRef:this.nameRef,id:"Name",label:"Name",defaultValue:"",InputProps:{startAdornment:r.a.createElement(v.a,{position:"start"},r.a.createElement(y.a,null))}})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(E.a,{required:!0,inputRef:this.idRef,id:"Session ID",label:"Session ID",defaultValue:"",InputProps:{startAdornment:r.a.createElement(v.a,{position:"start"},r.a.createElement(D.a,null))}})),r.a.createElement(f.a,{type:"submit",variant:"contained",color:"primary"},"Save"))),r.a.createElement("br",null),r.a.createElement("div",{className:S.a.right},r.a.createElement("video",{style:this.styles,autoPlay:!0,muted:!0,ref:this.videoRef,width:"720",height:"600"}),r.a.createElement("br",null),r.a.createElement("canvas",{style:this.styles,ref:this.canvasRef,width:"720",height:"650"}),r.a.createElement("br",null),r.a.createElement(f.a,{ref:this.recordRef,variant:"contained",color:"primary",disabled:this.state.recordButton},"Record"),r.a.createElement("ul",{ref:this.listRef,id:"list"})))}}]),a}(n.Component),C=a(66),j=a.n(C),N=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:j.a.body},r.a.createElement("h1",null,"ProcSmart"),r.a.createElement("h3",null,"ProcSmart is an online proctoring service using Machine Learning object classfication technology ideal for simulating and enforcing a test taking environment."),r.a.createElement("h2",null,"Features"),r.a.createElement("p",null,"- Record webcam video securely and reliably. Because ProcSmart is completely client based, no recording data is stored on our servers. Download the recording directly to your device."),r.a.createElement("p",null,"- Machine Learning models accurately identify whether a person is detected in the frame and if a phone is detected. After the user stops the recording, the data and statistics are downloaded as an easily readable JSON file."),r.a.createElement("p",null,"- Add a class to obtain a unique Session ID and encryption password. Students must add the Session ID to unlock recording. The encryption password can decrypt the webcam and JSON files downloaded by students, preventing the mishandling or tampering with the files."),r.a.createElement("br",null),r.a.createElement("h2",null,"Educators"),r.a.createElement("p",null,"1. Go to ",r.a.createElement("a",{href:"/create"},"Create"),"2. Enter class information and objects you want ProcSmart to detect and flag."),r.a.createElement("br",null),r.a.createElement("div",{className:j.a.start},r.a.createElement("h1",null,"Get Started"),r.a.createElement("h2",null,"I am a..."),r.a.createElement(f.a,{size:"large",className:j.a.button1,variant:"contained",color:"primary",href:"/record"},"Student"),r.a.createElement(f.a,{size:"large",className:j.a.button2,variant:"contained",color:"primary",href:"/create"},"Educator")))}}]),a}(n.Component),_=a(128),I=a(227),x=a(236),P=a(192),A=a(231),M=a(232),F=a(228),T=a(238),L=a(235),V=a(95),B=a.n(V),H=a(186),J=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).createSession=function(){var e=H(r.nameRef.current.value+r.classRef.current.value+r.state.term+r.state.year),t=H(r.nameRef.current.value+r.classRef.current.value+r.state.term+r.state.year+r.state.phone+r.state.person+r.state.book),a=r.nameRef.current.value,n=r.classRef.current.value;r.setState({name:a,course:n,sessionID:e,password:t}),p.collection("users").doc(e).set({sessionID:e,name:r.nameRef.current.value,course:r.classRef.current.value,term:r.state.term,year:r.state.year,password:t,phone:r.state.phone,person:r.state.person,book:r.state.book,bottle:r.state.bottle,laptop:r.state.laptop,remote:r.state.remote,keyboard:r.state.keyboard}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))},r.handleOnSubmit=function(e){e.preventDefault();var t=!1,a=!1,n=!1,o=!1;""===r.nameRef.current.value?t=!0:""===r.classRef.current.value?a=!0:""===r.state.term?n=!0:""===r.state.year&&(o=!0),r.setState({nameError:t,classError:a,termError:n,yearError:o}),t||a||n||o||r.createSession()},r.handleChange=function(e){r.setState(Object(_.a)({},e.target.name,e.target.checked))},r.handleTermChange=function(e){r.setState({term:e.target.value})},r.handleYearChange=function(e){r.setState({year:e.target.value})},r.state={name:"",course:"",sessionID:"",term:"",year:"",password:"",phone:!1,person:!1,book:!1,bottle:!1,laptop:!1,remote:!1,keyboard:!1,nameError:!1,classError:!1,termError:!1,yearError:!1},r.generateRef=Object(n.createRef)(),r.classRef=Object(n.createRef)(),r.nameRef=Object(n.createRef)(),r.handleOnSubmit=r.handleOnSubmit.bind(Object(h.a)(r)),r.handleChange=r.handleChange.bind(Object(h.a)(r)),r.handleTermChange=r.handleTermChange.bind(Object(h.a)(r)),r.handleYearChange=r.handleYearChange.bind(Object(h.a)(r)),r}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:B.a.form},r.a.createElement("h1",null,"Create class profile"),r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.handleOnSubmit},r.a.createElement("div",null,r.a.createElement(E.a,{required:!0,inputRef:this.nameRef,id:"standard-required",label:"Name",defaultValue:"",error:this.state.nameError,InputProps:{startAdornment:r.a.createElement(v.a,{position:"start"},r.a.createElement(y.a,null))}})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(E.a,{required:!0,inputRef:this.classRef,id:"standard-required",label:"Class",defaultValue:"",error:this.state.classError})),r.a.createElement("br",null),r.a.createElement(I.a,null,r.a.createElement(F.a,{shrink:!0,id:"demo-simple-select-placeholder-label-label"},"Term")," ",r.a.createElement(L.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.state.term,onChange:this.handleTermChange,className:B.a.combo,error:this.state.termError},r.a.createElement(T.a,{value:"Fall"},"Fall"),r.a.createElement(T.a,{value:"Winter"},"Winter"),r.a.createElement(T.a,{value:"Spring"},"Spring"),r.a.createElement(T.a,{value:"Summer"},"Summer"))),r.a.createElement(I.a,null,r.a.createElement(F.a,{shrink:!0,id:"demo-simple-select-placeholder-label-label"},"Year")," ",r.a.createElement(L.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.state.year,onChange:this.handleYearChange,className:B.a.combo,error:this.state.yearError},r.a.createElement(T.a,{value:"2020"},"2020"),r.a.createElement(T.a,{value:"2021"},"2021"),r.a.createElement(T.a,{value:"2022"},"2022"),r.a.createElement(T.a,{value:"2023"},"2023"),r.a.createElement(T.a,{value:"2024"},"2024"),r.a.createElement(T.a,{value:"2025"},"2025"),r.a.createElement(T.a,{value:"2026"},"2026"),r.a.createElement(T.a,{value:"2027"},"2027"),r.a.createElement(T.a,{value:"2028"},"2028"),r.a.createElement(T.a,{value:"2029"},"2029"),r.a.createElement(T.a,{value:"2030"},"2030"),r.a.createElement(T.a,{value:"2031"},"2031"),r.a.createElement(T.a,{value:"2032"},"2032"),r.a.createElement(T.a,{value:"2033"},"2033"),r.a.createElement(T.a,{value:"2034"},"2034"),r.a.createElement(T.a,{value:"2035"},"2035"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(P.a,{component:"legend"},"Choose Objects Classified"),r.a.createElement(A.a,null,r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.phone,onChange:this.handleChange,name:"phone"}),label:"phone"}),r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.person,onChange:this.handleChange,name:"person"}),label:"person"}),r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.book,onChange:this.handleChange,name:"book"}),label:"book"}),r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.laptop,onChange:this.handleChange,name:"laptop"}),label:"laptop"})),r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.bottle,onChange:this.handleChange,name:"bottle"}),label:"bottle"}),r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.remote,onChange:this.handleChange,name:"remote"}),label:"remote"}),r.a.createElement(M.a,{control:r.a.createElement(x.a,{checked:this.state.keyboard,onChange:this.handleChange,name:"keyboard"}),label:"keyboard"})),r.a.createElement("div",null,r.a.createElement(f.a,{type:"submit",ref:this.generateRef,variant:"contained",color:"primary"},"Generate"))),r.a.createElement("br",null),r.a.createElement("div",null,"Session ID: ",this.state.sessionID),r.a.createElement("div",null,"Session password: ",this.state.password))}}]),a}(n.Component),U=a(233),Y=a(234),G=a(130),q=a.n(G),z=a(131),W=a.n(z),K=a(132),Q=a.n(K),Z=(a(188),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={value:0},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement(U.a,{showLabels:!0,className:j.a.root},r.a.createElement(Y.a,{href:"/home",label:"Home",icon:r.a.createElement(q.a,null)}),r.a.createElement(Y.a,{href:"/record",label:"Record",icon:r.a.createElement(W.a,null)}),r.a.createElement(Y.a,{href:"/create",label:"Create",icon:r.a.createElement(Q.a,null)})),r.a.createElement("div",null,r.a.createElement(u.a,{exact:!0,path:"/",component:N}),r.a.createElement(u.a,{exact:!0,path:"/home",component:N}),r.a.createElement(u.a,{path:"/record",component:w}),r.a.createElement(u.a,{path:"/create",component:J}))))}}]),a}(n.Component));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root"))},66:function(e,t,a){e.exports={start:"Home_start__iHEO9",button1:"Home_button1__3-zlJ",button2:"Home_button2__2yQfY",body:"Home_body__36BU9"}},95:function(e,t,a){e.exports={form:"Create_form__1G6GE",combo:"Create_combo__2JV_0"}}},[[148,1,2]]]);
//# sourceMappingURL=main.91fc785a.chunk.js.map